@model Hades.Web.ViewModels.UsuarioViewModel

@{
    ViewBag.Title = "Create";
    Layout = null;
}

<h4>Novo Usuário</h4>

@using (Ajax.BeginForm("CreateConfirmed", "Usuario", null, new AjaxOptions
{
    HttpMethod = "POST",
    OnSuccess = "buscaTabelaUsuario()",
    OnFailure = "erro(xhr)"
}))

{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <hr />
        <div class="form-group">
            <label class="control-label col-md-2" style="color: black; font-weight: bold;">Nome</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.Nome, new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2" style="color: black; font-weight: bold;">Email</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2" style="color: black; font-weight: bold;">Senha  (Deve conter de 5 à 20 caracteres)</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.Senha, new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Criar" id="btnSalvar" class="btn btn-default"/>
            </div>
            <div style="margin-left: 110px; margin-top: -35px;">
                <button class="btn btn-default" onclick="buscaTabelaUsuario()">Cancelar</button>
            </div>
        </div>
    </div>
}


<script>
$("#btnSalvar").click(function (e) {
        e.preventDefault();

        var usuario =
        {
            Senha: $("#Senha").val(),
            Ativo: $("#Ativo").prop("checked"),
            Administrador: $("#Administrador").prop("checked"),
            Nome: $("#Nome").val(),
            Email: $("#Email").val(),
            DataCadastro: $("#DataCadastro").val()
        };
        console.log(usuario);
        $.post('@Url.Action("EditConfirmed", "Usuario")', {usuario: usuario })
        .done(function () {
        buscaTabelaUsuario();
        }).fail(function (xhr) {
        $("#Acoes").html(xhr.responseText);
        });
});
</script>